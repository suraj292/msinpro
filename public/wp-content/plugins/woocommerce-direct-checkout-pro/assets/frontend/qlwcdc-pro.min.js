(function(d){var c;var b=1000;var e=function(g){return g.is(".processing")||g.parents(".processing").length};var f=function(g){if(!e(g)){g.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}})}};var a=function(g){g.removeClass("processing").unblock()};d(document).on("click",".qlwcdc_quick_view",function(i){i.stopPropagation();i.preventDefault();var h=d(this).data("product_id"),g=d("#qlwcdc_quick_view_modal");if(h&&woocommerce_params.ajax_url){d.ajax({type:"post",url:woocommerce_params.ajax_url,data:{action:"qlwcdc_quick_view_modal",nonce:qlwcdc.nonce,product_id:h},complete:function(j){g.addClass("opening");setTimeout(function(){g.addClass("open");g.removeClass("opening")},50)},success:function(k){var j=d(k);j.find(".woocommerce-product-gallery").each(function(){d(this).wc_product_gallery()});j.on("click",".close",function(l){g.addClass("closing");setTimeout(function(){g.removeClass("open");g.removeClass("closing")},600)});g.find(".modal-content").replaceWith(j);if(typeof wc_add_to_cart_variation_params!=="undefined"){g.find(".variations_form").wc_variation_form()}}})}return false});d(document).on("click","#qlwcdc_quick_view_modal",function(i){var g=d(i.target),h=d(i.delegateTarget);if(g.hasClass("modal-dialog")){h.addClass("closing");setTimeout(function(){h.removeClass("open");h.removeClass("closing")},600)}});d(document).on("added_to_cart_message",function(h,g){d.ajax({type:"POST",url:woocommerce_params.ajax_url,data:g+"&"+d.param({action:"qlwcdc_add_product_cart_ajax_message",}),success:function(i){if(i.success){d(".woocommerce-notices-wrapper:first").replaceWith(i.data)}},})});d(document).on("click",".single_add_to_cart_button:not(.disabled)",function(j){var h=d(this),g=h.closest("form.cart"),i=g.find("input[name=variation_id]").val()||g.find("[name=add-to-cart]").val()||false;if(d("body").hasClass("qlwcdc-product-ajax")&&i){j.preventDefault();d.ajax({type:"POST",url:woocommerce_params.ajax_url,data:g.serialize()+"&"+d.param({action:"qlwcdc_add_to_cart_action","add-to-cart":i}),beforeSend:function(k){h.removeClass("added").addClass("loading")},complete:function(k){h.addClass("added").removeClass("loading")},success:function(k){if(k.error&k.product_url){window.location=k.product_url;return}d(document.body).trigger("added_to_cart",[k.fragments,k.cart_hash]);d(document.body).trigger("added_to_cart_message",[g.serialize()])},});return false}});d(document).on("click",".qlwcdc_quick_purchase",function(j){j.preventDefault();j.stopPropagation();var i=d(this),g=d(j.delegateTarget);var h=g.find("[name=add-to-cart]").val()||0,k=g.serialize().replace(/\%5B%5D/g,"[]")||0;i.attr("data-href",function(l,m){if(m.indexOf("?")!=-1){i.attr("data-href",i.attr("data-href")+"&add-to-cart="+h)}else{i.attr("data-href",i.attr("data-href")+"?add-to-cart="+h)}});if(k){i.attr("data-href",i.attr("data-href")+"&"+k)}if(i.attr("data-href")!="undefined"){document.location.href=i.attr("data-href")}return false});d(document).on("keyup","#qlwcdc_order_coupon_code",function(j){var h=d(this),i=d(this).find('input[name="coupon_code"]'),g=i.val();if(c){clearTimeout(c)}if(!g){return}c=setTimeout(function(){if(h.is(".processing")){return false}h.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:0.6}});var k={security:wc_checkout_params.apply_coupon_nonce,coupon_code:g};d.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:k,success:function(l){h.removeClass("processing").unblock();if(l){i.before(d(l).hide().fadeIn());setTimeout(function(){d(document.body).trigger("update_checkout",{update_shipping_method:false})},b*2)}},dataType:"html"});return false},b)});d("#order_review").on("change","input.qty",function(h){h.preventDefault();var g=d(this);setTimeout(function(){var i=g.attr("name").replace(/cart\[([\w]+)\]\[qty\]/g,"$1"),j=parseFloat(g.val());d.ajax({type:"post",url:woocommerce_params.ajax_url,data:{action:"qlwcdc_update_cart",nonce:qlwcdc.nonce,hash:i,quantity:j},beforeSend:function(k){f(d("#order_review"))},complete:function(k){a(d("#order_review"))},success:function(k){if(k){d("#order_review").html(d(k).html()).trigger("updated_checkout");d(document.body).trigger("added_to_cart")}},})},400)});d("#order_review").on("click","a.remove",function(h){h.preventDefault();var g=d(this).data("cart_item_key");d.ajax({type:"post",url:woocommerce_params.ajax_url,data:{action:"qlwcdc_update_cart",nonce:qlwcdc.nonce,quantity:0,hash:g},beforeSend:function(i){f(d("#order_review"))},complete:function(i){a(d("#order_review"))},success:function(i){if(i){d("#order_review").html(d(i).html()).trigger("updated_checkout");d(document.body).trigger("added_to_cart")}},})})})(jQuery);